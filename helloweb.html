<!doctype html>
<html>
	<head>
		<title>Hello Web</title>
		<script src="file:///Users/mahi/blog/regex/regex_parser.js"></script>
		<script src="file:///Users/mahi/blog/regex/regex_visualization.js"></script>
		<script src="file:///Users/mahi/blog/regex/cycle.js"></script>
	</head>
	<body onresize="regexobj.render();">
		<input id="regexinput" type="text" onKeyUp="compileRegex(this.value);"></input>
		<button onclick="renderRegex();">render</button>
		<pre id="regexerror"></pre>
		<svg id="regexsvg"></svg>
		<pre id="regexjson"></pre>
		<script>
			var regexobj = null;

			function renderRegex() {
				regexobj.render();
			}

			function compileRegex(rxp) {
				try {
					regexobj = new MRegex(rxp, document.getElementById("regexsvg"), 15.0, 145.62);
					//regex = parser.parse(String(text));
					//fillStates(regex);
					var json = JSON.stringify(JSON.decycle(regexobj), null, 2);	
					document.getElementById("regexerror").innerHTML = "";
					document.getElementById("regexjson").innerHTML = json;
				} catch(e) {
					document.getElementById("regexjson").innerHTML = "";
					document.getElementById("regexerror").innerHTML = e;
				}
			}
		</script>
	</body>
</html>
